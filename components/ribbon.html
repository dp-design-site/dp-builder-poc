<!-- components/ribbon.html -->
<div id="dp-ribbon" class="dp-ribbon">
  <div class="dp-ribbon-row">
    <div class="dp-ribbon-tab active" data-tab="constraints">Constraints</div>
    <!-- бъдещи табове: Arrange, Widgets, View, ... -->
  </div>
  <div class="dp-ribbon-row dp-ribbon-tools" data-tab-content="constraints">
    <div class="group">
      <div class="group-title">Align</div>
      <button class="tool" id="tool-align-vertical" title="Vertical Align (Constr.)">
        <span class="icon">│</span>
        <span>Vertical</span>
      </button>
      <button class="tool" id="tool-align-horizontal" title="Horizontal Align (Constr.)">
        <span class="icon">─</span>
        <span>Horizontal</span>
      </button>
    </div>
  </div>
</div>

<style>
  .dp-ribbon { position: fixed; top: 0; left: 0; right: 0; height: 120px; z-index: 10000;
    background: linear-gradient(180deg, #2a3147, #232a3a); border-bottom: 1px solid #1b2234; color: #eaeef7;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; }
  .dp-ribbon-row { display: flex; align-items: center; gap: 12px; padding: 6px 12px; }
  .dp-ribbon-tab { padding: 6px 10px; border-radius: 6px; cursor: pointer; opacity: .9; }
  .dp-ribbon-tab.active { background: #2f3852; opacity: 1; }
  .dp-ribbon-tools { display: flex; gap: 24px; padding-top: 8px; }
  .group { display: inline-flex; align-items: stretch; gap: 8px; background: #21283a; border: 1px solid #2b3450; border-radius: 10px; padding: 10px; }
  .group-title { font-size: 12px; opacity: .8; margin-right: 8px; align-self: center; }
  .tool { display: inline-flex; flex-direction: column; align-items: center; justify-content: center; gap: 6px;
    width: 84px; height: 68px; background: #26304a; border: 1px solid #313a57; border-radius: 10px; cursor: pointer; }
  .tool:hover { background: #2d3856; }
  .tool .icon { font-size: 22px; line-height: 1; }

  /* За да не покрива напълно платното: ще оставим да се припокриват; по-късно можем да вдигнем canvas padding-top */
</style>

<script>
(function(){
  function ensureConstraintsAPI(){
    if (!window.Constraints || typeof window.Constraints.setMode !== 'function') {
      console.warn('[ribbon] Constraints API not ready');
      return false;
    }
    return true;
  }

  document.getElementById('tool-align-vertical')?.addEventListener('click', () => {
    if (!ensureConstraintsAPI()) return;
    window.Constraints.setMode(window.Constraints.getMode() === 'alignV' ? 'none' : 'alignV');
  });
  document.getElementById('tool-align-horizontal')?.addEventListener('click', () => {
    if (!ensureConstraintsAPI()) return;
    window.Constraints.setMode(window.Constraints.getMode() === 'alignH' ? 'none' : 'alignH');
  });
})();
</script>
